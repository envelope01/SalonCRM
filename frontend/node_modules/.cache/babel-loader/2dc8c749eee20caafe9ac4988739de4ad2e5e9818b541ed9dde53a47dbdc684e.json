{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\balmi\\\\Downloads\\\\SalonCRM\\\\frontend\\\\src\\\\pages\\\\ClientDetailPage.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/ClientDetailPage.js\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport api from \"../api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ClientDetailPage() {\n  _s();\n  var _lastVisit$totalAmoun;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n\n  // --- local UI state ---\n  const [client, setClient] = useState(null);\n  const [visits, setVisits] = useState([]);\n  const [lastVisit, setLastVisit] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [visitsLoading, setVisitsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  // edit\n  const [isEditing, setIsEditing] = useState(false);\n  const [editName, setEditName] = useState(\"\");\n  const [editPhone, setEditPhone] = useState(\"\");\n  const [editNotes, setEditNotes] = useState(\"\");\n  const [savingClient, setSavingClient] = useState(false);\n  const [clientError, setClientError] = useState(\"\");\n\n  // visit form UI\n  const [showVisitForm, setShowVisitForm] = useState(false);\n\n  // --- helpers ---\n  const getInitials = name => {\n    if (!name) return \"NA\";\n    const parts = name.trim().split(/\\s+/);\n    if (parts.length === 1) return parts[0].slice(0, 2).toUpperCase();\n    return (parts[0][0] + parts[1][0]).toUpperCase();\n  };\n  const formatDate = d => {\n    if (!d) return \"—\";\n    try {\n      return new Date(d).toLocaleString();\n    } catch {\n      return d;\n    }\n  };\n\n  // --- fetch client ---\n  const fetchClient = useCallback(async clientId => {\n    try {\n      setError(\"\");\n      const res = await api.get(`/clients/${clientId}`);\n      setClient(res.data);\n      setEditName(res.data.name || \"\");\n      setEditPhone(res.data.phone || \"\");\n      setEditNotes(res.data.notes || \"\");\n    } catch (err) {\n      var _err$response;\n      console.error(\"fetchClient:\", err);\n      if ((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 404) setError(\"Client not found (404).\");else setError(\"Unable to fetch client. Is backend running?\");\n      setClient(null);\n    }\n  }, []);\n\n  // --- fetch visits & last visit ---\n  const fetchVisits = useCallback(async clientId => {\n    try {\n      setVisitsLoading(true);\n      const res = await api.get(`/visits/client/${clientId}`);\n      setVisits(Array.isArray(res.data) ? res.data : []);\n\n      // last\n      try {\n        const lastRes = await api.get(`/visits/client/${clientId}/last`);\n        setLastVisit(lastRes.data || null);\n      } catch (err) {\n        var _err$response2;\n        if ((err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 404) setLastVisit(null);else console.error(\"fetch last visit:\", err);\n      }\n    } catch (err) {\n      console.error(\"fetchVisits:\", err);\n      setVisits([]);\n      setLastVisit(null);\n    } finally {\n      setVisitsLoading(false);\n    }\n  }, []);\n\n  // --- initial load ---\n  useEffect(() => {\n    if (!id) {\n      setError(\"Missing client id in URL.\");\n      setLoading(false);\n      return;\n    }\n    const load = async () => {\n      setLoading(true);\n      await fetchClient(id);\n      await fetchVisits(id);\n      setLoading(false);\n    };\n    load();\n  }, [id, fetchClient, fetchVisits]);\n\n  // --- save client edits ---\n  const handleSaveClient = async () => {\n    setClientError(\"\");\n    if (!editName.trim() || !editPhone.trim()) return setClientError(\"Name & phone required\");\n    try {\n      setSavingClient(true);\n      const res = await api.put(`/clients/${client._id}`, {\n        name: editName.trim(),\n        phone: editPhone.trim(),\n        notes: editNotes.trim()\n      });\n      setClient(res.data);\n      setIsEditing(false);\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error(\"save client:\", err);\n      setClientError((err === null || err === void 0 ? void 0 : (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || \"Failed to save client.\");\n    } finally {\n      setSavingClient(false);\n    }\n  };\n\n  // --- simple visit refresh after adding (if you implement visit form) ---\n  const handleVisitAdded = async () => {\n    setShowVisitForm(false);\n    await fetchVisits(id);\n    // update lastVisit too\n    try {\n      const lastRes = await api.get(`/visits/client/${id}/last`);\n      setLastVisit(lastRes.data || null);\n    } catch {}\n  };\n\n  // --- UI states ---\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid px-4 pb-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app-card\",\n        style: {\n          textAlign: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner-border text-secondary\",\n          role: \"status\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 text-muted\",\n          children: \"Loading client details\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid px-4 pb-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-danger\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Error:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), \" \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-light\",\n            onClick: () => navigate(-1),\n            children: \"\\u2190 Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            className: \"btn btn-dark\",\n            children: \"Clients\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this);\n  }\n  if (!client) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid px-4 pb-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-warning\",\n          children: \"Client data not available.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"btn btn-dark\",\n          children: \"Back to clients\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this);\n  }\n\n  // --- main render ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid px-4 pb-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-card mb-4 d-flex justify-content-between align-items-start flex-wrap gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex align-items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"client-avatar shadow-sm\",\n          style: {\n            width: 72,\n            height: 72,\n            borderRadius: 12,\n            fontSize: 22\n          },\n          children: getInitials(client.name)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: !isEditing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"m-0\",\n              children: client.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-muted small\",\n              children: [\"Phone: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: client.phone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 58\n              }, this), \" \\u2022 Joined: \", client.createdAt ? new Date(client.createdAt).toLocaleDateString() : \"—\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this), client.notes && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-muted small mt-2\",\n              children: [\"Notes: \", client.notes]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              minWidth: 280\n            },\n            children: [clientError && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alert alert-danger small py-1\",\n              children: clientError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-2\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control form-control-sm\",\n                value: editName,\n                onChange: e => setEditName(e.target.value),\n                placeholder: \"Full name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-2\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control form-control-sm\",\n                value: editPhone,\n                onChange: e => setEditPhone(e.target.value),\n                placeholder: \"Phone\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-2\",\n              children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"form-control form-control-sm\",\n                rows: \"2\",\n                value: editNotes,\n                onChange: e => setEditNotes(e.target.value),\n                placeholder: \"Notes (optional)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-dark btn-sm\",\n                onClick: handleSaveClient,\n                disabled: savingClient,\n                children: savingClient ? \"Saving...\" : \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-light btn-sm\",\n                onClick: () => {\n                  setIsEditing(false);\n                  setClientError(\"\");\n                  setEditName(client.name || \"\");\n                  setEditPhone(client.phone || \"\");\n                  setEditNotes(client.notes || \"\");\n                },\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex gap-2 align-items-start\",\n        children: !isEditing && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline-primary btn-sm\",\n            onClick: () => setShowVisitForm(v => !v),\n            children: showVisitForm ? \"Hide Visit\" : \"+ Add Visit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-dark btn-sm\",\n            onClick: () => setIsEditing(true),\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row g-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-5\",\n        children: [showVisitForm && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"app-card mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"mb-2\",\n            children: \"Record new visit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-muted small mb-2\",\n            children: \"Placeholder VisitForm \\u2014 implement `VisitForm` component or paste it here to enable adding visits.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-dark btn-sm\",\n              onClick: async () => {\n                var _client$_id;\n                // small helper to create a demo visit quickly so you see the UI without building form\n                const demo = {\n                  clientId: (_client$_id = client._id) !== null && _client$_id !== void 0 ? _client$_id : client.id,\n                  visitDate: new Date().toISOString(),\n                  services: [{\n                    name: \"Haircut\",\n                    priceAtTime: 300,\n                    quantity: 1,\n                    lineTotal: 300\n                  }],\n                  totalAmount: 300,\n                  notes: \"Quick demo visit\"\n                };\n                try {\n                  await api.post(\"/visits\", demo);\n                  await handleVisitAdded();\n                } catch (err) {\n                  console.error(\"demo add visit:\", err);\n                  alert(\"Demo add failed. Check backend.\");\n                }\n              },\n              children: \"Add demo visit (300)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-light btn-sm\",\n              onClick: () => setShowVisitForm(false),\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"app-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"mb-2\",\n            children: \"Last visit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), lastVisit ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-muted small mb-2\",\n              children: formatDate(lastVisit.visitDate)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-unstyled small\",\n              children: (lastVisit.services || []).map((s, i) => {\n                var _s$quantity, _s$lineTotal, _s$priceAtTime;\n                return /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"d-flex justify-content-between py-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [s.name, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-muted small\",\n                      children: [\"\\xD7\", (_s$quantity = s.quantity) !== null && _s$quantity !== void 0 ? _s$quantity : 1]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 277,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 277,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"fw-bold\",\n                    children: [\"\\u20B9\", (_s$lineTotal = s.lineTotal) !== null && _s$lineTotal !== void 0 ? _s$lineTotal : (_s$priceAtTime = s.priceAtTime) !== null && _s$priceAtTime !== void 0 ? _s$priceAtTime : 0]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 23\n                  }, this)]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-top pt-2 d-flex justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-muted\",\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"fw-bold\",\n                children: [\"\\u20B9\", (_lastVisit$totalAmoun = lastVisit.totalAmount) !== null && _lastVisit$totalAmoun !== void 0 ? _lastVisit$totalAmoun : 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-muted small\",\n            children: \"No recent visits recorded.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-7\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"app-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"mb-2\",\n            children: \"Visit history\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this), visitsLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-muted small\",\n            children: \"Loading history\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this) : !visits || visits.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-muted small\",\n            children: \"No visit history available.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              maxHeight: 520,\n              overflow: \"auto\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-sm mb-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"text-muted small\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: 140\n                    },\n                    children: \"Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Services\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 306,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-end\",\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: visits.map(v => {\n                  var _v$_id;\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"small text-muted\",\n                      children: new Date(v.visitDate).toLocaleDateString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 313,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"small\",\n                      children: (v.services || []).map(s => s.name).join(\", \")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 314,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"text-end fw-bold\",\n                      children: [\"\\u20B9\", v.totalAmount]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 25\n                    }, this)]\n                  }, (_v$_id = v._id) !== null && _v$_id !== void 0 ? _v$_id : v.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 23\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-light\",\n        onClick: () => navigate(-1),\n        children: \"\\u2190 Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"btn btn-link ms-2\",\n        children: \"Clients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 5\n  }, this);\n}\n_s(ClientDetailPage, \"PFgVzw+HiaATHaTmGqCzdBiYd9I=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ClientDetailPage;\nexport default ClientDetailPage;\nvar _c;\n$RefreshReg$(_c, \"ClientDetailPage\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","useParams","Link","useNavigate","api","jsxDEV","_jsxDEV","Fragment","_Fragment","ClientDetailPage","_s","_lastVisit$totalAmoun","id","navigate","client","setClient","visits","setVisits","lastVisit","setLastVisit","loading","setLoading","visitsLoading","setVisitsLoading","error","setError","isEditing","setIsEditing","editName","setEditName","editPhone","setEditPhone","editNotes","setEditNotes","savingClient","setSavingClient","clientError","setClientError","showVisitForm","setShowVisitForm","getInitials","name","parts","trim","split","length","slice","toUpperCase","formatDate","d","Date","toLocaleString","fetchClient","clientId","res","get","data","phone","notes","err","_err$response","console","response","status","fetchVisits","Array","isArray","lastRes","_err$response2","load","handleSaveClient","put","_id","_err$response3","_err$response3$data","message","handleVisitAdded","className","children","style","textAlign","role","fileName","_jsxFileName","lineNumber","columnNumber","onClick","to","width","height","borderRadius","fontSize","createdAt","toLocaleDateString","minWidth","value","onChange","e","target","placeholder","rows","disabled","v","_client$_id","demo","visitDate","toISOString","services","priceAtTime","quantity","lineTotal","totalAmount","post","alert","map","s","i","_s$quantity","_s$lineTotal","_s$priceAtTime","maxHeight","overflow","_v$_id","join","_c","$RefreshReg$"],"sources":["C:/Users/balmi/Downloads/SalonCRM/frontend/src/pages/ClientDetailPage.js"],"sourcesContent":["// frontend/src/pages/ClientDetailPage.js\r\nimport React, { useEffect, useState, useCallback } from \"react\";\r\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\r\nimport api from \"../api\";\r\n\r\nfunction ClientDetailPage() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  // --- local UI state ---\r\n  const [client, setClient] = useState(null);\r\n  const [visits, setVisits] = useState([]);\r\n  const [lastVisit, setLastVisit] = useState(null);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [visitsLoading, setVisitsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // edit\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editName, setEditName] = useState(\"\");\r\n  const [editPhone, setEditPhone] = useState(\"\");\r\n  const [editNotes, setEditNotes] = useState(\"\");\r\n  const [savingClient, setSavingClient] = useState(false);\r\n  const [clientError, setClientError] = useState(\"\");\r\n\r\n  // visit form UI\r\n  const [showVisitForm, setShowVisitForm] = useState(false);\r\n\r\n  // --- helpers ---\r\n  const getInitials = (name) => {\r\n    if (!name) return \"NA\";\r\n    const parts = name.trim().split(/\\s+/);\r\n    if (parts.length === 1) return parts[0].slice(0, 2).toUpperCase();\r\n    return (parts[0][0] + parts[1][0]).toUpperCase();\r\n  };\r\n\r\n  const formatDate = (d) => {\r\n    if (!d) return \"—\";\r\n    try {\r\n      return new Date(d).toLocaleString();\r\n    } catch {\r\n      return d;\r\n    }\r\n  };\r\n\r\n  // --- fetch client ---\r\n  const fetchClient = useCallback(async (clientId) => {\r\n    try {\r\n      setError(\"\");\r\n      const res = await api.get(`/clients/${clientId}`);\r\n      setClient(res.data);\r\n      setEditName(res.data.name || \"\");\r\n      setEditPhone(res.data.phone || \"\");\r\n      setEditNotes(res.data.notes || \"\");\r\n    } catch (err) {\r\n      console.error(\"fetchClient:\", err);\r\n      if (err?.response?.status === 404) setError(\"Client not found (404).\");\r\n      else setError(\"Unable to fetch client. Is backend running?\");\r\n      setClient(null);\r\n    }\r\n  }, []);\r\n\r\n  // --- fetch visits & last visit ---\r\n  const fetchVisits = useCallback(async (clientId) => {\r\n    try {\r\n      setVisitsLoading(true);\r\n      const res = await api.get(`/visits/client/${clientId}`);\r\n      setVisits(Array.isArray(res.data) ? res.data : []);\r\n\r\n      // last\r\n      try {\r\n        const lastRes = await api.get(`/visits/client/${clientId}/last`);\r\n        setLastVisit(lastRes.data || null);\r\n      } catch (err) {\r\n        if (err?.response?.status === 404) setLastVisit(null);\r\n        else console.error(\"fetch last visit:\", err);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"fetchVisits:\", err);\r\n      setVisits([]);\r\n      setLastVisit(null);\r\n    } finally {\r\n      setVisitsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // --- initial load ---\r\n  useEffect(() => {\r\n    if (!id) {\r\n      setError(\"Missing client id in URL.\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    const load = async () => {\r\n      setLoading(true);\r\n      await fetchClient(id);\r\n      await fetchVisits(id);\r\n      setLoading(false);\r\n    };\r\n    load();\r\n  }, [id, fetchClient, fetchVisits]);\r\n\r\n  // --- save client edits ---\r\n  const handleSaveClient = async () => {\r\n    setClientError(\"\");\r\n    if (!editName.trim() || !editPhone.trim()) return setClientError(\"Name & phone required\");\r\n    try {\r\n      setSavingClient(true);\r\n      const res = await api.put(`/clients/${client._id}`, {\r\n        name: editName.trim(),\r\n        phone: editPhone.trim(),\r\n        notes: editNotes.trim(),\r\n      });\r\n      setClient(res.data);\r\n      setIsEditing(false);\r\n    } catch (err) {\r\n      console.error(\"save client:\", err);\r\n      setClientError(err?.response?.data?.message || \"Failed to save client.\");\r\n    } finally {\r\n      setSavingClient(false);\r\n    }\r\n  };\r\n\r\n  // --- simple visit refresh after adding (if you implement visit form) ---\r\n  const handleVisitAdded = async () => {\r\n    setShowVisitForm(false);\r\n    await fetchVisits(id);\r\n    // update lastVisit too\r\n    try {\r\n      const lastRes = await api.get(`/visits/client/${id}/last`);\r\n      setLastVisit(lastRes.data || null);\r\n    } catch {}\r\n  };\r\n\r\n  // --- UI states ---\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container-fluid px-4 pb-5\">\r\n        <div className=\"app-card\" style={{ textAlign: \"center\" }}>\r\n          <div className=\"spinner-border text-secondary\" role=\"status\"></div>\r\n          <div className=\"mt-2 text-muted\">Loading client details…</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"container-fluid px-4 pb-5\">\r\n        <div className=\"app-card\">\r\n          <div className=\"alert alert-danger\">\r\n            <strong>Error:</strong> {error}\r\n          </div>\r\n          <div className=\"d-flex gap-2\">\r\n            <button className=\"btn btn-light\" onClick={() => navigate(-1)}>← Back</button>\r\n            <Link to=\"/\" className=\"btn btn-dark\">Clients</Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!client) {\r\n    return (\r\n      <div className=\"container-fluid px-4 pb-5\">\r\n        <div className=\"app-card\">\r\n          <div className=\"alert alert-warning\">Client data not available.</div>\r\n          <Link to=\"/\" className=\"btn btn-dark\">Back to clients</Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- main render ---\r\n  return (\r\n    <div className=\"container-fluid px-4 pb-5\">\r\n      {/* Header */}\r\n      <div className=\"app-card mb-4 d-flex justify-content-between align-items-start flex-wrap gap-3\">\r\n        <div className=\"d-flex align-items-center gap-3\">\r\n          <div className=\"client-avatar shadow-sm\" style={{ width: 72, height: 72, borderRadius: 12, fontSize: 22 }}>\r\n            {getInitials(client.name)}\r\n          </div>\r\n\r\n          <div>\r\n            {!isEditing ? (\r\n              <>\r\n                <h3 className=\"m-0\">{client.name}</h3>\r\n                <div className=\"text-muted small\">Phone: <strong>{client.phone}</strong> • Joined: {client.createdAt ? new Date(client.createdAt).toLocaleDateString() : \"—\"}</div>\r\n                {client.notes && <div className=\"text-muted small mt-2\">Notes: {client.notes}</div>}\r\n              </>\r\n            ) : (\r\n              <div style={{ minWidth: 280 }}>\r\n                {clientError && <div className=\"alert alert-danger small py-1\">{clientError}</div>}\r\n                <div className=\"mb-2\">\r\n                  <input className=\"form-control form-control-sm\" value={editName} onChange={e => setEditName(e.target.value)} placeholder=\"Full name\" />\r\n                </div>\r\n                <div className=\"mb-2\">\r\n                  <input className=\"form-control form-control-sm\" value={editPhone} onChange={e => setEditPhone(e.target.value)} placeholder=\"Phone\" />\r\n                </div>\r\n                <div className=\"mb-2\">\r\n                  <textarea className=\"form-control form-control-sm\" rows=\"2\" value={editNotes} onChange={e => setEditNotes(e.target.value)} placeholder=\"Notes (optional)\"></textarea>\r\n                </div>\r\n                <div className=\"d-flex gap-2\">\r\n                  <button className=\"btn btn-dark btn-sm\" onClick={handleSaveClient} disabled={savingClient}>\r\n                    {savingClient ? \"Saving...\" : \"Save\"}\r\n                  </button>\r\n                  <button className=\"btn btn-light btn-sm\" onClick={() => { setIsEditing(false); setClientError(\"\"); setEditName(client.name || \"\"); setEditPhone(client.phone || \"\"); setEditNotes(client.notes || \"\"); }}>\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"d-flex gap-2 align-items-start\">\r\n          {!isEditing && (\r\n            <>\r\n              <button className=\"btn btn-outline-primary btn-sm\" onClick={() => setShowVisitForm(v => !v)}>\r\n                {showVisitForm ? \"Hide Visit\" : \"+ Add Visit\"}\r\n              </button>\r\n              <button className=\"btn btn-dark btn-sm\" onClick={() => setIsEditing(true)}>Edit</button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Two column layout: left = visit form + last visit, right = history */}\r\n      <div className=\"row g-3\">\r\n        <div className=\"col-lg-5\">\r\n          {/* Visit Form placeholder */}\r\n          {showVisitForm && (\r\n            <div className=\"app-card mb-3\">\r\n              <h5 className=\"mb-2\">Record new visit</h5>\r\n              <div className=\"text-muted small mb-2\">Placeholder VisitForm — implement `VisitForm` component or paste it here to enable adding visits.</div>\r\n\r\n              {/* quick demo buttons to simulate adding a visit (optional) */}\r\n              <div className=\"d-flex gap-2\">\r\n                <button\r\n                  className=\"btn btn-dark btn-sm\"\r\n                  onClick={async () => {\r\n                    // small helper to create a demo visit quickly so you see the UI without building form\r\n                    const demo = {\r\n                      clientId: client._id ?? client.id,\r\n                      visitDate: new Date().toISOString(),\r\n                      services: [{ name: \"Haircut\", priceAtTime: 300, quantity: 1, lineTotal: 300 }],\r\n                      totalAmount: 300,\r\n                      notes: \"Quick demo visit\",\r\n                    };\r\n                    try {\r\n                      await api.post(\"/visits\", demo);\r\n                      await handleVisitAdded();\r\n                    } catch (err) {\r\n                      console.error(\"demo add visit:\", err);\r\n                      alert(\"Demo add failed. Check backend.\");\r\n                    }\r\n                  }}\r\n                >\r\n                  Add demo visit (300)\r\n                </button>\r\n\r\n                <button className=\"btn btn-light btn-sm\" onClick={() => setShowVisitForm(false)}>Cancel</button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Last Visit */}\r\n          <div className=\"app-card\">\r\n            <h6 className=\"mb-2\">Last visit</h6>\r\n            {lastVisit ? (\r\n              <>\r\n                <div className=\"text-muted small mb-2\">{formatDate(lastVisit.visitDate)}</div>\r\n                <ul className=\"list-unstyled small\">\r\n                  {(lastVisit.services || []).map((s, i) => (\r\n                    <li key={i} className=\"d-flex justify-content-between py-1\">\r\n                      <div>{s.name} <span className=\"text-muted small\">×{s.quantity ?? 1}</span></div>\r\n                      <div className=\"fw-bold\">₹{s.lineTotal ?? (s.priceAtTime ?? 0)}</div>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n                <div className=\"border-top pt-2 d-flex justify-content-between\">\r\n                  <div className=\"text-muted\">Total</div>\r\n                  <div className=\"fw-bold\">₹{lastVisit.totalAmount ?? 0}</div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <div className=\"text-muted small\">No recent visits recorded.</div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-lg-7\">\r\n          <div className=\"app-card\">\r\n            <h6 className=\"mb-2\">Visit history</h6>\r\n            {visitsLoading ? (\r\n              <div className=\"text-muted small\">Loading history…</div>\r\n            ) : !visits || visits.length === 0 ? (\r\n              <div className=\"text-muted small\">No visit history available.</div>\r\n            ) : (\r\n              <div style={{ maxHeight: 520, overflow: \"auto\" }}>\r\n                <table className=\"table table-sm mb-0\">\r\n                  <thead>\r\n                    <tr className=\"text-muted small\">\r\n                      <th style={{ width: 140 }}>Date</th>\r\n                      <th>Services</th>\r\n                      <th className=\"text-end\">Total</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {visits.map((v) => (\r\n                      <tr key={v._id ?? v.id}>\r\n                        <td className=\"small text-muted\">{new Date(v.visitDate).toLocaleDateString()}</td>\r\n                        <td className=\"small\">{(v.services || []).map(s => s.name).join(\", \")}</td>\r\n                        <td className=\"text-end fw-bold\">₹{v.totalAmount}</td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mt-3\">\r\n        <button className=\"btn btn-light\" onClick={() => navigate(-1)}>← Back</button>\r\n        <Link to=\"/\" className=\"btn btn-link ms-2\">Clients</Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ClientDetailPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}