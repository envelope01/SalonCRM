{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\balmi\\\\Downloads\\\\SalonCRM\\\\frontend\\\\src\\\\pages\\\\ClientDetailPage.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/ClientDetailPage.js\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport api from \"../api\";\n// NOTE: If you implement VisitForm later you can import it and replace the placeholder:\n// import VisitForm from \"../components/VisitForm\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ClientDetailPage() {\n  _s();\n  var _lastVisit$totalAmoun;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n\n  // Theme palette — change these four values to recolor the page in one place\n  const PALETTE = {\n    deep: \"#540863\",\n    mid: \"#92487A\",\n    soft: \"#E49BA6\",\n    pale: \"#FFD3D5\"\n  };\n\n  // --- State Management ---\n  const [client, setClient] = useState(null);\n  const [lastVisit, setLastVisit] = useState(null);\n  const [visits, setVisits] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [visitsLoading, setVisitsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  // Edit State\n  const [isEditing, setIsEditing] = useState(false);\n  const [editName, setEditName] = useState(\"\");\n  const [editPhone, setEditPhone] = useState(\"\");\n  const [editNotes, setEditNotes] = useState(\"\");\n  const [savingClient, setSavingClient] = useState(false);\n  const [clientSaveError, setClientSaveError] = useState(\"\");\n\n  // Visit Form State\n  const [showVisitForm, setShowVisitForm] = useState(false);\n\n  // --- Data Fetching (Wrapped in useCallback) ---\n  const fetchClient = useCallback(async clientId => {\n    try {\n      setError(\"\");\n      const res = await api.get(`/clients/${clientId}`);\n      setClient(res.data);\n      setEditName(res.data.name || \"\");\n      setEditPhone(res.data.phone || \"\");\n      setEditNotes(res.data.notes || \"\");\n    } catch (err) {\n      var _err$response;\n      console.error(\"Error fetching client:\", err);\n      if ((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 404) {\n        setError(\"Client not found (404).\");\n      } else {\n        setError(\"Network error while fetching client. Is the backend running?\");\n      }\n      setClient(null);\n    }\n  }, []);\n  const fetchVisits = useCallback(async clientId => {\n    try {\n      setVisitsLoading(true);\n      const historyRes = await api.get(`/visits/client/${clientId}`);\n      setVisits(Array.isArray(historyRes.data) ? historyRes.data : []);\n      try {\n        const lastRes = await api.get(`/visits/client/${clientId}/last`);\n        setLastVisit(lastRes.data || null);\n      } catch (err) {\n        var _err$response2;\n        if ((err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 404) {\n          setLastVisit(null);\n        } else {\n          console.error(\"Error fetching last visit:\", err);\n        }\n      }\n    } catch (err) {\n      console.error(\"Error fetching visits:\", err);\n      setVisits([]);\n    } finally {\n      setVisitsLoading(false);\n    }\n  }, []);\n\n  // --- Load Effect ---\n  useEffect(() => {\n    if (!id) {\n      setError(\"No client id in URL.\");\n      return;\n    }\n    const load = async () => {\n      setLoading(true);\n      await fetchClient(id);\n      await fetchVisits(id);\n      setLoading(false);\n    };\n    load();\n  }, [id, fetchClient, fetchVisits]);\n\n  // --- Handlers ---\n  const handleSaveClient = async () => {\n    setClientSaveError(\"\");\n    if (!editName.trim() || !editPhone.trim()) return setClientSaveError(\"Name & phone required\");\n    try {\n      setSavingClient(true);\n      const res = await api.put(`/clients/${client._id}`, {\n        name: editName.trim(),\n        phone: editPhone.trim(),\n        notes: editNotes.trim()\n      });\n      setClient(res.data);\n      setIsEditing(false);\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error(\"Save client error:\", err);\n      setClientSaveError((err === null || err === void 0 ? void 0 : (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || \"Failed to save client details.\");\n    } finally {\n      setSavingClient(false);\n    }\n  };\n\n  // Helper function to display initials for avatar\n  const getInitials = name => {\n    if (!name) return \"NA\";\n    const p = name.trim().split(/\\s+/);\n    if (p.length === 1) return (p[0][0] || \"\").toUpperCase();\n    return ((p[0][0] || \"\") + (p[1][0] || \"\")).toUpperCase();\n  };\n  const formatDate = dateString => {\n    if (!dateString) return \"—\";\n    const d = new Date(dateString);\n    return d.toLocaleString();\n  };\n\n  // --- Render helpers ---\n  const Avatar = ({\n    name\n  }) => {\n    const initials = getInitials(name);\n    const grad = `linear-gradient(135deg, ${PALETTE.deep}, ${PALETTE.mid})`;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cdp-avatar\",\n      \"aria-hidden\": true,\n      style: {\n        background: grad\n      },\n      children: initials\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this);\n  };\n\n  // --- Loading / Error / Not found ---\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cdp-root\",\n      children: [/*#__PURE__*/_jsxDEV(\"style\", {\n        children: componentCss(PALETTE)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cdp-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cdp-card cdp-centered\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"muted mt-2\",\n            children: \"Loading client details\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cdp-root\",\n      children: [/*#__PURE__*/_jsxDEV(\"style\", {\n        children: componentCss(PALETTE)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cdp-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cdp-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-danger mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Error:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this), \" \", error]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-secondary\",\n              onClick: () => navigate(-1),\n              children: \"\\u2190 Back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              className: \"btn btn-primary\",\n              children: \"Clients list\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this);\n  }\n  if (!client) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cdp-root\",\n      children: [/*#__PURE__*/_jsxDEV(\"style\", {\n        children: componentCss(PALETTE)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cdp-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cdp-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-warning\",\n            children: \"Client data not available.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            className: \"btn btn-primary\",\n            children: \"Back to clients\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this);\n  }\n\n  // --- Main Render ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cdp-root\",\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: componentCss(PALETTE)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cdp-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cdp-breadcrumb\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"link-muted\",\n          children: \"\\u2190 Clients\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cdp-card cdp-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cdp-header-left\",\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            name: client.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cdp-client-info\",\n            children: !isEditing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"cdp-name\",\n                children: client.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: [\"Phone: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: client.phone\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 28\n                }, this), \" \\xA0|\\xA0 Joined:\", \" \", client.createdAt ? new Date(client.createdAt).toLocaleDateString() : \"—\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 19\n              }, this), client.notes && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted mt-2\",\n                children: [\"Notes: \", client.notes]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 36\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cdp-edit-form\",\n              children: [clientSaveError && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"alert alert-danger small\",\n                children: clientSaveError\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 39\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-2\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control form-control-sm\",\n                  value: editName,\n                  onChange: e => setEditName(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-2\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control form-control-sm\",\n                  value: editPhone,\n                  onChange: e => setEditPhone(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-2\",\n                children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  className: \"form-control form-control-sm\",\n                  rows: \"2\",\n                  value: editNotes,\n                  onChange: e => setEditNotes(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-success btn-sm\",\n                  onClick: handleSaveClient,\n                  disabled: savingClient,\n                  children: savingClient ? \"Saving...\" : \"Save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-outline-secondary btn-sm\",\n                  onClick: () => {\n                    setIsEditing(false);\n                    setClientSaveError(\"\");\n                    // reset edits back to current client values\n                    setEditName(client.name || \"\");\n                    setEditPhone(client.phone || \"\");\n                    setEditNotes(client.notes || \"\");\n                  },\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cdp-header-right\",\n          children: !isEditing && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn small btn-outline-primary\",\n              onClick: () => setShowVisitForm(v => !v),\n              children: showVisitForm ? \"Hide Visit Form\" : \"+ Add Visit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn small btn-primary\",\n              onClick: () => setIsEditing(true),\n              style: {\n                background: `linear-gradient(90deg, ${PALETTE.mid}, ${PALETTE.deep})`,\n                border: \"none\"\n              },\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cdp-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cdp-column-left\",\n          children: [showVisitForm && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cdp-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"mb-2\",\n              children: \"Record new visit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"muted small mb-2\",\n              children: \"Visit form placeholder \\u2014 implement `VisitForm` component and replace this area.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-top pt-2\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-sm btn-outline-secondary\",\n                onClick: () => setShowVisitForm(false),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cdp-card mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"cdp-section-title\",\n              children: \"Last visit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this), lastVisit ? /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted small mb-2\",\n                children: formatDate(lastVisit.visitDate)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"cdp-service-list\",\n                children: (lastVisit.services || []).map((s, i) => {\n                  var _s$quantity, _s$lineTotal, _s$priceAtTime;\n                  return /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex justify-content-between\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [s.name, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"muted small\",\n                          children: [\"\\xD7\", (_s$quantity = s.quantity) !== null && _s$quantity !== void 0 ? _s$quantity : 1]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 311,\n                          columnNumber: 41\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 311,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"fw-bold\",\n                        children: [\"\\u20B9\", (_s$lineTotal = s.lineTotal) !== null && _s$lineTotal !== void 0 ? _s$lineTotal : (_s$priceAtTime = s.priceAtTime) !== null && _s$priceAtTime !== void 0 ? _s$priceAtTime : 0]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 312,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 310,\n                      columnNumber: 25\n                    }, this)\n                  }, i, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 23\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cdp-total d-flex justify-content-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"muted\",\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"fw-bold\",\n                  children: [\"\\u20B9\", (_lastVisit$totalAmoun = lastVisit.totalAmount) !== null && _lastVisit$totalAmoun !== void 0 ? _lastVisit$totalAmoun : 0]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"muted small\",\n              children: \"No recent visits recorded.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cdp-column-right\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cdp-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"cdp-section-title\",\n              children: \"Visit history\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 15\n            }, this), visitsLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"muted\",\n              children: \"Loading history\\u2026\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this) : !visits || visits.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"muted\",\n              children: \"No visit history available.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cdp-history\",\n              children: visits.map(v => {\n                var _v$_id;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cdp-history-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"muted small\",\n                      children: new Date(v.visitDate).toLocaleDateString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 340,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"small\",\n                      children: (v.services || []).map(s => s.name).join(\", \")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 341,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"fw-bold\",\n                    children: [\"\\u20B9\", v.totalAmount]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 23\n                  }, this)]\n                }, (_v$_id = v._id) !== null && _v$_id !== void 0 ? _v$_id : v.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-outline-secondary\",\n          onClick: () => navigate(-1),\n          children: \"\\u2190 Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"btn btn-link ms-2\",\n          children: \"Clients list\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n}\n_s(ClientDetailPage, \"xtX6aqBXN0c1sx8724kAOBRrMpo=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ClientDetailPage;\nexport default ClientDetailPage;\nvar _c;\n$RefreshReg$(_c, \"ClientDetailPage\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","useParams","Link","useNavigate","api","jsxDEV","_jsxDEV","Fragment","_Fragment","ClientDetailPage","_s","_lastVisit$totalAmoun","id","navigate","PALETTE","deep","mid","soft","pale","client","setClient","lastVisit","setLastVisit","visits","setVisits","loading","setLoading","visitsLoading","setVisitsLoading","error","setError","isEditing","setIsEditing","editName","setEditName","editPhone","setEditPhone","editNotes","setEditNotes","savingClient","setSavingClient","clientSaveError","setClientSaveError","showVisitForm","setShowVisitForm","fetchClient","clientId","res","get","data","name","phone","notes","err","_err$response","console","response","status","fetchVisits","historyRes","Array","isArray","lastRes","_err$response2","load","handleSaveClient","trim","put","_id","_err$response3","_err$response3$data","message","getInitials","p","split","length","toUpperCase","formatDate","dateString","d","Date","toLocaleString","Avatar","initials","grad","className","style","background","children","fileName","_jsxFileName","lineNumber","columnNumber","componentCss","onClick","to","createdAt","toLocaleDateString","value","onChange","e","target","rows","disabled","v","border","visitDate","services","map","s","i","_s$quantity","_s$lineTotal","_s$priceAtTime","quantity","lineTotal","priceAtTime","totalAmount","_v$_id","join","_c","$RefreshReg$"],"sources":["C:/Users/balmi/Downloads/SalonCRM/frontend/src/pages/ClientDetailPage.js"],"sourcesContent":["// frontend/src/pages/ClientDetailPage.js\r\nimport React, { useEffect, useState, useCallback } from \"react\";\r\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\r\nimport api from \"../api\";\r\n// NOTE: If you implement VisitForm later you can import it and replace the placeholder:\r\n// import VisitForm from \"../components/VisitForm\";\r\n\r\nfunction ClientDetailPage() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  // Theme palette — change these four values to recolor the page in one place\r\n  const PALETTE = {\r\n    deep: \"#540863\",\r\n    mid: \"#92487A\",\r\n    soft: \"#E49BA6\",\r\n    pale: \"#FFD3D5\",\r\n  };\r\n\r\n  // --- State Management ---\r\n  const [client, setClient] = useState(null);\r\n  const [lastVisit, setLastVisit] = useState(null);\r\n  const [visits, setVisits] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [visitsLoading, setVisitsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // Edit State\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editName, setEditName] = useState(\"\");\r\n  const [editPhone, setEditPhone] = useState(\"\");\r\n  const [editNotes, setEditNotes] = useState(\"\");\r\n  const [savingClient, setSavingClient] = useState(false);\r\n  const [clientSaveError, setClientSaveError] = useState(\"\");\r\n\r\n  // Visit Form State\r\n  const [showVisitForm, setShowVisitForm] = useState(false);\r\n\r\n  // --- Data Fetching (Wrapped in useCallback) ---\r\n  const fetchClient = useCallback(async (clientId) => {\r\n    try {\r\n      setError(\"\");\r\n      const res = await api.get(`/clients/${clientId}`);\r\n      setClient(res.data);\r\n      setEditName(res.data.name || \"\");\r\n      setEditPhone(res.data.phone || \"\");\r\n      setEditNotes(res.data.notes || \"\");\r\n    } catch (err) {\r\n      console.error(\"Error fetching client:\", err);\r\n      if (err?.response?.status === 404) {\r\n        setError(\"Client not found (404).\");\r\n      } else {\r\n        setError(\"Network error while fetching client. Is the backend running?\");\r\n      }\r\n      setClient(null);\r\n    }\r\n  }, []);\r\n\r\n  const fetchVisits = useCallback(async (clientId) => {\r\n    try {\r\n      setVisitsLoading(true);\r\n      const historyRes = await api.get(`/visits/client/${clientId}`);\r\n      setVisits(Array.isArray(historyRes.data) ? historyRes.data : []);\r\n      try {\r\n        const lastRes = await api.get(`/visits/client/${clientId}/last`);\r\n        setLastVisit(lastRes.data || null);\r\n      } catch (err) {\r\n        if (err?.response?.status === 404) {\r\n          setLastVisit(null);\r\n        } else {\r\n          console.error(\"Error fetching last visit:\", err);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error fetching visits:\", err);\r\n      setVisits([]);\r\n    } finally {\r\n      setVisitsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // --- Load Effect ---\r\n  useEffect(() => {\r\n    if (!id) {\r\n      setError(\"No client id in URL.\");\r\n      return;\r\n    }\r\n    const load = async () => {\r\n      setLoading(true);\r\n      await fetchClient(id);\r\n      await fetchVisits(id);\r\n      setLoading(false);\r\n    };\r\n    load();\r\n  }, [id, fetchClient, fetchVisits]);\r\n\r\n  // --- Handlers ---\r\n  const handleSaveClient = async () => {\r\n    setClientSaveError(\"\");\r\n    if (!editName.trim() || !editPhone.trim()) return setClientSaveError(\"Name & phone required\");\r\n    try {\r\n      setSavingClient(true);\r\n      const res = await api.put(`/clients/${client._id}`, {\r\n        name: editName.trim(),\r\n        phone: editPhone.trim(),\r\n        notes: editNotes.trim(),\r\n      });\r\n      setClient(res.data);\r\n      setIsEditing(false);\r\n    } catch (err) {\r\n      console.error(\"Save client error:\", err);\r\n      setClientSaveError(err?.response?.data?.message || \"Failed to save client details.\");\r\n    } finally {\r\n      setSavingClient(false);\r\n    }\r\n  };\r\n\r\n  // Helper function to display initials for avatar\r\n  const getInitials = (name) => {\r\n    if (!name) return \"NA\";\r\n    const p = name.trim().split(/\\s+/);\r\n    if (p.length === 1) return (p[0][0] || \"\").toUpperCase();\r\n    return ((p[0][0] || \"\") + (p[1][0] || \"\")).toUpperCase();\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"—\";\r\n    const d = new Date(dateString);\r\n    return d.toLocaleString();\r\n  };\r\n\r\n  // --- Render helpers ---\r\n  const Avatar = ({ name }) => {\r\n    const initials = getInitials(name);\r\n    const grad = `linear-gradient(135deg, ${PALETTE.deep}, ${PALETTE.mid})`;\r\n    return (\r\n      <div\r\n        className=\"cdp-avatar\"\r\n        aria-hidden\r\n        style={{\r\n          background: grad,\r\n        }}\r\n      >\r\n        {initials}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // --- Loading / Error / Not found ---\r\n  if (loading) {\r\n    return (\r\n      <div className=\"cdp-root\">\r\n        <style>{componentCss(PALETTE)}</style>\r\n        <div className=\"cdp-container\">\r\n          <div className=\"cdp-card cdp-centered\">\r\n            <div className=\"spinner\" />\r\n            <div className=\"muted mt-2\">Loading client details…</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"cdp-root\">\r\n        <style>{componentCss(PALETTE)}</style>\r\n        <div className=\"cdp-container\">\r\n          <div className=\"cdp-card\">\r\n            <div className=\"alert alert-danger mb-3\">\r\n              <strong>Error:</strong> {error}\r\n            </div>\r\n            <div className=\"d-flex gap-2\">\r\n              <button className=\"btn btn-outline-secondary\" onClick={() => navigate(-1)}>\r\n                ← Back\r\n              </button>\r\n              <Link to=\"/\" className=\"btn btn-primary\">\r\n                Clients list\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!client) {\r\n    return (\r\n      <div className=\"cdp-root\">\r\n        <style>{componentCss(PALETTE)}</style>\r\n        <div className=\"cdp-container\">\r\n          <div className=\"cdp-card\">\r\n            <div className=\"alert alert-warning\">Client data not available.</div>\r\n            <Link to=\"/\" className=\"btn btn-primary\">\r\n              Back to clients\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- Main Render ---\r\n  return (\r\n    <div className=\"cdp-root\">\r\n      <style>{componentCss(PALETTE)}</style>\r\n\r\n      <div className=\"cdp-container\">\r\n        <div className=\"cdp-breadcrumb\">\r\n          <Link to=\"/\" className=\"link-muted\">\r\n            ← Clients\r\n          </Link>\r\n        </div>\r\n\r\n        {/* Header Card */}\r\n        <div className=\"cdp-card cdp-header\">\r\n          <div className=\"cdp-header-left\">\r\n            <Avatar name={client.name} />\r\n            <div className=\"cdp-client-info\">\r\n              {!isEditing ? (\r\n                <>\r\n                  <h2 className=\"cdp-name\">{client.name}</h2>\r\n                  <div className=\"muted\">\r\n                    Phone: <strong>{client.phone}</strong> &nbsp;|&nbsp; Joined:{\" \"}\r\n                    {client.createdAt ? new Date(client.createdAt).toLocaleDateString() : \"—\"}\r\n                  </div>\r\n                  {client.notes && <div className=\"muted mt-2\">Notes: {client.notes}</div>}\r\n                </>\r\n              ) : (\r\n                <div className=\"cdp-edit-form\">\r\n                  {clientSaveError && <div className=\"alert alert-danger small\">{clientSaveError}</div>}\r\n                  <div className=\"mb-2\">\r\n                    <input className=\"form-control form-control-sm\" value={editName} onChange={(e) => setEditName(e.target.value)} />\r\n                  </div>\r\n                  <div className=\"mb-2\">\r\n                    <input className=\"form-control form-control-sm\" value={editPhone} onChange={(e) => setEditPhone(e.target.value)} />\r\n                  </div>\r\n                  <div className=\"mb-2\">\r\n                    <textarea className=\"form-control form-control-sm\" rows=\"2\" value={editNotes} onChange={(e) => setEditNotes(e.target.value)} />\r\n                  </div>\r\n                  <div className=\"d-flex gap-2\">\r\n                    <button className=\"btn btn-success btn-sm\" onClick={handleSaveClient} disabled={savingClient}>\r\n                      {savingClient ? \"Saving...\" : \"Save\"}\r\n                    </button>\r\n                    <button\r\n                      className=\"btn btn-outline-secondary btn-sm\"\r\n                      onClick={() => {\r\n                        setIsEditing(false);\r\n                        setClientSaveError(\"\");\r\n                        // reset edits back to current client values\r\n                        setEditName(client.name || \"\");\r\n                        setEditPhone(client.phone || \"\");\r\n                        setEditNotes(client.notes || \"\");\r\n                      }}\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"cdp-header-right\">\r\n            {!isEditing && (\r\n              <>\r\n                <button\r\n                  className=\"btn small btn-outline-primary\"\r\n                  onClick={() => setShowVisitForm((v) => !v)}\r\n                >\r\n                  {showVisitForm ? \"Hide Visit Form\" : \"+ Add Visit\"}\r\n                </button>\r\n                <button\r\n                  className=\"btn small btn-primary\"\r\n                  onClick={() => setIsEditing(true)}\r\n                  style={{ background: `linear-gradient(90deg, ${PALETTE.mid}, ${PALETTE.deep})`, border: \"none\" }}\r\n                >\r\n                  Edit\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Columns */}\r\n        <div className=\"cdp-grid\">\r\n          <div className=\"cdp-column-left\">\r\n            {/* Visit Form placeholder */}\r\n            {showVisitForm && (\r\n              <div className=\"cdp-card\">\r\n                <h5 className=\"mb-2\">Record new visit</h5>\r\n                <div className=\"muted small mb-2\">Visit form placeholder — implement `VisitForm` component and replace this area.</div>\r\n                <div className=\"border-top pt-2\">\r\n                  <button className=\"btn btn-sm btn-outline-secondary\" onClick={() => setShowVisitForm(false)}>\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Last Visit */}\r\n            <div className=\"cdp-card mt-3\">\r\n              <h6 className=\"cdp-section-title\">Last visit</h6>\r\n              {lastVisit ? (\r\n                <div>\r\n                  <div className=\"muted small mb-2\">{formatDate(lastVisit.visitDate)}</div>\r\n                  <ul className=\"cdp-service-list\">\r\n                    {(lastVisit.services || []).map((s, i) => (\r\n                      <li key={i}>\r\n                        <div className=\"d-flex justify-content-between\">\r\n                          <div>{s.name} <span className=\"muted small\">×{s.quantity ?? 1}</span></div>\r\n                          <div className=\"fw-bold\">₹{s.lineTotal ?? (s.priceAtTime ?? 0)}</div>\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                  <div className=\"cdp-total d-flex justify-content-between\">\r\n                    <div className=\"muted\">Total</div>\r\n                    <div className=\"fw-bold\">₹{lastVisit.totalAmount ?? 0}</div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"muted small\">No recent visits recorded.</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"cdp-column-right\">\r\n            <div className=\"cdp-card\">\r\n              <h6 className=\"cdp-section-title\">Visit history</h6>\r\n              {visitsLoading ? (\r\n                <div className=\"muted\">Loading history…</div>\r\n              ) : !visits || visits.length === 0 ? (\r\n                <div className=\"muted\">No visit history available.</div>\r\n              ) : (\r\n                <div className=\"cdp-history\">\r\n                  {visits.map((v) => (\r\n                    <div key={v._id ?? v.id} className=\"cdp-history-row\">\r\n                      <div>\r\n                        <div className=\"muted small\">{new Date(v.visitDate).toLocaleDateString()}</div>\r\n                        <div className=\"small\">{(v.services || []).map((s) => s.name).join(\", \")}</div>\r\n                      </div>\r\n                      <div className=\"fw-bold\">₹{v.totalAmount}</div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-3\">\r\n          <button className=\"btn btn-outline-secondary\" onClick={() => navigate(-1)}>\r\n            ← Back\r\n          </button>\r\n          <Link to=\"/\" className=\"btn btn-link ms-2\">\r\n            Clients list\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ClientDetailPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}