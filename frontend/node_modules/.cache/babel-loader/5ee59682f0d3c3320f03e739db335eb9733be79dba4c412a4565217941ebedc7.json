{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\balmi\\\\Downloads\\\\SalonCRM\\\\frontend\\\\src\\\\pages\\\\ClientDetailPage.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/ClientDetailPage.js\nimport React, { useEffect, useState } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport api from \"../api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ClientDetailPage() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [client, setClient] = useState(null);\n  const [lastVisit, setLastVisit] = useState(null);\n  const [visits, setVisits] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [visitsLoading, setVisitsLoading] = useState(false);\n  const [error, setError] = useState(\"\"); // friendly error message\n\n  // Load client by id\n  const fetchClient = async clientId => {\n    try {\n      setError(\"\");\n      const res = await api.get(`/clients/${clientId}`);\n      console.log(\"GET /api/clients/:id response:\", res);\n      setClient(res.data);\n    } catch (err) {\n      console.error(\"Error fetching client:\", err);\n      // network or server error\n      if (err.response) {\n        // server returned a response (4xx or 5xx)\n        if (err.response.status === 404) {\n          setError(\"Client not found (404). It might have been deleted.\");\n        } else {\n          var _err$response$data;\n          setError(`Server error: ${err.response.status} ${((_err$response$data = err.response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"\"}`);\n        }\n      } else {\n        setError(\"Network error while fetching client. Is the backend running?\");\n      }\n      setClient(null);\n    }\n  };\n\n  // Load visits and last visit\n  const fetchVisits = async clientId => {\n    try {\n      setVisitsLoading(true);\n      // full history\n      const historyRes = await api.get(`/visits/client/${clientId}`);\n      setVisits(Array.isArray(historyRes.data) ? historyRes.data : []);\n\n      // last visit (may 404 if no visits)\n      try {\n        const lastRes = await api.get(`/visits/client/${clientId}/last`);\n        setLastVisit(lastRes.data);\n      } catch (err) {\n        if (err.response && err.response.status === 404) {\n          setLastVisit(null);\n        } else {\n          console.error(\"Error fetching last visit:\", err);\n        }\n      }\n    } catch (err) {\n      console.error(\"Error fetching visits:\", err);\n    } finally {\n      setVisitsLoading(false);\n    }\n  };\n  useEffect(() => {\n    // defensive: if id is missing, go back to list\n    if (!id) {\n      setError(\"No client id in URL. Redirecting to clients list...\");\n      setTimeout(() => navigate(\"/\", {\n        replace: true\n      }), 1000);\n      return;\n    }\n    const load = async () => {\n      setLoading(true);\n      await fetchClient(id);\n      await fetchVisits(id);\n      setLoading(false);\n    };\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n  const formatDate = dateString => {\n    if (!dateString) return \"\";\n    const d = new Date(dateString);\n    return d.toLocaleString();\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"1.5rem\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading client...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"1.5rem\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Error:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), \" \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary me-2\",\n          onClick: () => navigate(-1),\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"btn btn-primary\",\n          children: \"Go to clients list\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"small text-muted mt-2\",\n        children: \"If this says \\\"Network error\\\", make sure backend is running at the expected port and the API path is correct.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this);\n  }\n  if (!client) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"1.5rem\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-warning\",\n        children: \"Client data not available.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"btn btn-primary\",\n        children: \"Back to clients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"1.5rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"1rem\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"\\u2190 Back to clients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between align-items-start mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"mb-1\",\n          children: client.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-muted\",\n          children: [\"Phone: \", client.phone]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), client.notes && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"small mt-1\",\n          children: client.notes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge bg-secondary\",\n          children: [\"Joined \", client.createdAt ? new Date(client.createdAt).toLocaleDateString() : \"—\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-5 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"app-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"mb-2\",\n            children: \"Last Visit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), lastVisit ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"small text-muted\",\n              children: formatDate(lastVisit.visitDate)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"small mt-2\",\n              children: lastVisit.services.map((s, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [s.name, \" \\u2014 \", s.quantity, \" x \\u20B9\", s.priceAtTime, \" = \\u20B9\", s.lineTotal]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"fw-bold mt-2\",\n              children: [\"Total: \\u20B9\", lastVisit.totalAmount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-muted small\",\n            children: \"No visits recorded.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-7\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"app-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"mb-2\",\n            children: \"Visit History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), visitsLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Loading history...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this) : !visits || visits.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-muted\",\n            children: \"No visit history available.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-borderless\",\n            children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: visits.map(v => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  style: {\n                    width: \"160px\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"small text-muted\",\n                    children: new Date(v.visitDate).toLocaleDateString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"small\",\n                    children: v.services.map(s => `${s.name} (${s.quantity}x)`).join(\", \")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"text-end fw-bold\",\n                  children: [\"\\u20B9\", v.totalAmount]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 23\n                }, this)]\n              }, v._id || v.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 5\n  }, this);\n}\n_s(ClientDetailPage, \"95zqOKhte8kZ4MdvtOyJTcEWgaw=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ClientDetailPage;\nexport default ClientDetailPage;\nvar _c;\n$RefreshReg$(_c, \"ClientDetailPage\");","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","useNavigate","api","jsxDEV","_jsxDEV","Fragment","_Fragment","ClientDetailPage","_s","id","navigate","client","setClient","lastVisit","setLastVisit","visits","setVisits","loading","setLoading","visitsLoading","setVisitsLoading","error","setError","fetchClient","clientId","res","get","console","log","data","err","response","status","_err$response$data","message","fetchVisits","historyRes","Array","isArray","lastRes","setTimeout","replace","load","formatDate","dateString","d","Date","toLocaleString","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","to","marginBottom","name","phone","notes","createdAt","toLocaleDateString","visitDate","services","map","s","i","quantity","priceAtTime","lineTotal","totalAmount","length","v","width","join","_id","_c","$RefreshReg$"],"sources":["C:/Users/balmi/Downloads/SalonCRM/frontend/src/pages/ClientDetailPage.js"],"sourcesContent":["// frontend/src/pages/ClientDetailPage.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\r\nimport api from \"../api\";\r\n\r\nfunction ClientDetailPage() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const [client, setClient] = useState(null);\r\n  const [lastVisit, setLastVisit] = useState(null);\r\n  const [visits, setVisits] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [visitsLoading, setVisitsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\"); // friendly error message\r\n\r\n  // Load client by id\r\n  const fetchClient = async (clientId) => {\r\n    try {\r\n      setError(\"\");\r\n      const res = await api.get(`/clients/${clientId}`);\r\n      console.log(\"GET /api/clients/:id response:\", res);\r\n      setClient(res.data);\r\n    } catch (err) {\r\n      console.error(\"Error fetching client:\", err);\r\n      // network or server error\r\n      if (err.response) {\r\n        // server returned a response (4xx or 5xx)\r\n        if (err.response.status === 404) {\r\n          setError(\"Client not found (404). It might have been deleted.\");\r\n        } else {\r\n          setError(`Server error: ${err.response.status} ${err.response.data?.message || \"\"}`);\r\n        }\r\n      } else {\r\n        setError(\"Network error while fetching client. Is the backend running?\");\r\n      }\r\n      setClient(null);\r\n    }\r\n  };\r\n\r\n  // Load visits and last visit\r\n  const fetchVisits = async (clientId) => {\r\n    try {\r\n      setVisitsLoading(true);\r\n      // full history\r\n      const historyRes = await api.get(`/visits/client/${clientId}`);\r\n      setVisits(Array.isArray(historyRes.data) ? historyRes.data : []);\r\n\r\n      // last visit (may 404 if no visits)\r\n      try {\r\n        const lastRes = await api.get(`/visits/client/${clientId}/last`);\r\n        setLastVisit(lastRes.data);\r\n      } catch (err) {\r\n        if (err.response && err.response.status === 404) {\r\n          setLastVisit(null);\r\n        } else {\r\n          console.error(\"Error fetching last visit:\", err);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error fetching visits:\", err);\r\n    } finally {\r\n      setVisitsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // defensive: if id is missing, go back to list\r\n    if (!id) {\r\n      setError(\"No client id in URL. Redirecting to clients list...\");\r\n      setTimeout(() => navigate(\"/\", { replace: true }), 1000);\r\n      return;\r\n    }\r\n\r\n    const load = async () => {\r\n      setLoading(true);\r\n      await fetchClient(id);\r\n      await fetchVisits(id);\r\n      setLoading(false);\r\n    };\r\n\r\n    load();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [id]);\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"\";\r\n    const d = new Date(dateString);\r\n    return d.toLocaleString();\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ padding: \"1.5rem\" }}>\r\n        <p>Loading client...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ padding: \"1.5rem\" }}>\r\n        <div className=\"alert alert-danger\">\r\n          <strong>Error:</strong> {error}\r\n        </div>\r\n        <div className=\"mb-2\">\r\n          <button className=\"btn btn-secondary me-2\" onClick={() => navigate(-1)}>Back</button>\r\n          <Link to=\"/\" className=\"btn btn-primary\">Go to clients list</Link>\r\n        </div>\r\n        <div className=\"small text-muted mt-2\">\r\n          If this says \"Network error\", make sure backend is running at the expected port and the API path is correct.\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!client) {\r\n    return (\r\n      <div style={{ padding: \"1.5rem\" }}>\r\n        <div className=\"alert alert-warning\">Client data not available.</div>\r\n        <Link to=\"/\" className=\"btn btn-primary\">Back to clients</Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: \"1.5rem\" }}>\r\n      <div style={{ marginBottom: \"1rem\" }}>\r\n        <Link to=\"/\">← Back to clients</Link>\r\n      </div>\r\n\r\n      <div className=\"d-flex justify-content-between align-items-start mb-3\">\r\n        <div>\r\n          <h4 className=\"mb-1\">{client.name}</h4>\r\n          <div className=\"text-muted\">Phone: {client.phone}</div>\r\n          {client.notes && <div className=\"small mt-1\">{client.notes}</div>}\r\n        </div>\r\n        <div>\r\n          <span className=\"badge bg-secondary\">Joined {client.createdAt ? new Date(client.createdAt).toLocaleDateString() : \"—\"}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col-lg-5 mb-3\">\r\n          <div className=\"app-card\">\r\n            <h6 className=\"mb-2\">Last Visit</h6>\r\n            {lastVisit ? (\r\n              <>\r\n                <div className=\"small text-muted\">{formatDate(lastVisit.visitDate)}</div>\r\n                <ul className=\"small mt-2\">\r\n                  {lastVisit.services.map((s, i) => (\r\n                    <li key={i}>\r\n                      {s.name} — {s.quantity} x ₹{s.priceAtTime} = ₹{s.lineTotal}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n                <div className=\"fw-bold mt-2\">Total: ₹{lastVisit.totalAmount}</div>\r\n              </>\r\n            ) : (\r\n              <div className=\"text-muted small\">No visits recorded.</div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-lg-7\">\r\n          <div className=\"app-card\">\r\n            <h6 className=\"mb-2\">Visit History</h6>\r\n            {visitsLoading ? (\r\n              <div>Loading history...</div>\r\n            ) : !visits || visits.length === 0 ? (\r\n              <div className=\"text-muted\">No visit history available.</div>\r\n            ) : (\r\n              <table className=\"table table-borderless\">\r\n                <tbody>\r\n                  {visits.map((v) => (\r\n                    <tr key={v._id || v.id}>\r\n                      <td style={{ width: \"160px\" }}>\r\n                        <div className=\"small text-muted\">{new Date(v.visitDate).toLocaleDateString()}</div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"small\">{v.services.map((s) => `${s.name} (${s.quantity}x)`).join(\", \")}</div>\r\n                      </td>\r\n                      <td className=\"text-end fw-bold\">₹{v.totalAmount}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ClientDetailPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}